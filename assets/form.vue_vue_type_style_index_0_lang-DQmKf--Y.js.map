{"version":3,"file":"form.vue_vue_type_style_index_0_lang-DQmKf--Y.js","sources":["../../src/components/BasicForm/index.vue","../../src/views/form.vue"],"sourcesContent":["<template>\n  <el-form ref=\"formRef\" :model=\"options.data\" :rules=\"options.rules\" :label-width=\"options.label.width\"\n    v-on=\"Object.assign({}, $attrs.events)\" v-bind=\"Object.assign({}, $attrs.props)\">\n    <el-form-item v-for=\"(item, index) in options.formList\" :key=\"index\" :prop=\"item.prop\" :label=\"item.label\">\n      <template #label=\"{ label }\">\n        {{ label }}\n      </template>\n      <!-- 设置具名插槽，传参为record，当使用template时会占据这个位置 -->\n      <slot :name=\"item.prop\" :record=\"options.data[item.prop]\">\n        <!-- 输入框 -->\n        <el-input v-if=\"item.type?.name === 'input'\" v-model=\"options.data[item.prop]\">\n          <template v-if=\"item.type?.prepend\" #prepend>\n            {{ item.type?.prepend }}\n          </template>\n          <template v-if=\"item.type?.append\" #append>\n            {{ item.type?.append }}\n          </template>\n        </el-input>\n        <!-- 图片 -->\n        <div v-if=\"item.type?.name === 'image'\">\n          <basic-image v-for=\"(src, index) in options.data[item.prop]\" :key=\"index\" :src=\"src\"\n          :preview-src-list=\"options.data[item.prop]\" preview-teleported></basic-image>\n          <basic-image v-if=\"!options.data[item.prop]\"></basic-image>\n        </div>\n        <!-- 视频 -->\n        <div v-if=\"item.type?.name === 'video'\">\n          <video v-bind=\"item?.style\" v-if=\"!!options.data[item.prop]\" \n            :src=\"options.data[item.prop]\" controls></video>\n          <basic-image v-else></basic-image>\n        </div>\n        <!-- 单选框 -->\n        <el-radio-group v-if=\"item.type?.name === 'radio'\" v-model=\"options.data[item.prop]\">\n          <el-radio v-for=\"radio in item.type?.radios\" :key=\"radio.label\" v-bind=\"radio\">\n            {{ radio.value }}\n          </el-radio>\n        </el-radio-group>\n        <!-- 多选框 -->\n        <el-checkbox-group v-if=\"item.type?.name === 'checkbox'\" v-model=\"options.data[item.prop]\">\n          <el-checkbox v-for=\"checkbox in item.type?.checkbox\" :key=\"checkbox.label\" v-bind=\"checkbox\">\n            {{ checkbox.value }}\n          </el-checkbox>\n        </el-checkbox-group>\n        <!-- 选择器 -->\n        <el-select v-if=\"item.type?.name === 'select'\" v-model=\"options.data[item.prop]\">\n          <el-option v-for=\"select in item.type?.select\" :key=\"select.value\" \n            :label=\"select.label\" :value=\"select.value\"></el-option>\n        </el-select>\n        <!-- 开关 -->\n        <el-switch v-if=\"item.type?.name === 'switch'\" v-model=\"options.data[item.prop]\"></el-switch>\n        <!-- 时间选择 -->\n        <el-time-select v-if=\"item.type?.name === 'time-select'\" v-model=\"options.data[item.prop]\"\n          :start=\"item.type?.start\" :end=\"item.type?.end\" :step=\"item.type?.step\"/>\n          <!-- 日期选择 -->\n          <el-date-picker v-if=\"item.type?.name === 'date'\" v-model=\"options.data[item.prop]\" />\n      </slot>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script setup lang='ts'>\nconst attrs = useAttrs()\nconsole.log('attrs', attrs)\ndefineProps({\n  options: {\n    type: Object,\n    required: true\n  }\n})\nconst formRef = ref()\ndefineExpose({\n  formRef\n})\n</script>\n\n<style scoped lang='scss'>\n\n</style>","<template>\r\n  <h1>表单二次封装</h1>\r\n  <basic-form ref=\"basicFormRef\" :options=\"options\" :props=\"options.props\" :events=\"options.events\">\r\n    <!-- 使用插槽覆盖掉组件里的，record就是传参 -->\r\n    <template #name=\"{record}\">\r\n      {{ record }}\r\n    </template>\r\n  </basic-form>\r\n  <el-button @click=\"save\">保存</el-button>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nconst basicFormRef = ref()\r\nconst data = computed(() => options.data)\r\nconst save = () => {\r\n  console.log('basicFormRef', basicFormRef.value.formRef)\r\n  basicFormRef.value.formRef.validate((valid: boolean) => {\r\n    if (valid) {\r\n      console.log('data', data.value)\r\n    } else {\r\n      console.log('校验错误')\r\n    }\r\n  })\r\n}\r\nconst options = reactive({\r\n  // el-form原生属性\r\n  props: {\r\n\r\n  },\r\n  // el-form原生事件\r\n  events: {},\r\n  // 校验规则\r\n  rules: {\r\n    // website: [\r\n    //   { required: true, message: '请输入', trigger: 'blur' },\r\n    //   { min: 3, max: 5, message: '长度在3到5', trigger: 'blur' },\r\n    // ]\r\n  },\r\n  formList: [\r\n    // {\r\n    //   prop: 'website',\r\n    //   label: '网站',\r\n    //   type: {\r\n    //     name: 'input',\r\n    //     placeholder: '请输入网站',\r\n    //     prepend: 'www',\r\n    //     append: 'com'\r\n    //   }\r\n    // },\r\n    // {\r\n    //   prop: 'name',\r\n    //   label: '姓名',\r\n    //   type: {\r\n    //     name: 'input'\r\n    //   }\r\n    // },\r\n    // {\r\n    //   prop: 'image',\r\n    //   label: '图片',\r\n    //   type: {\r\n    //     name: 'image'\r\n    //   }\r\n    // },\r\n    // {\r\n    //   prop: 'video',\r\n    //   label: '视频',\r\n    //   type: {\r\n    //     name: 'video'\r\n    //   },\r\n    //   style: {\r\n    //     width: '100',\r\n    //     height: '100'\r\n    //   }\r\n    // },\r\n    // {\r\n    //   prop: 'radio',\r\n    //   label: '单选',\r\n    //   type: {\r\n    //     name: 'radio',\r\n    //     radios: [\r\n    //       {\r\n    //         value: '测试',\r\n    //         label: '1'\r\n    //       },\r\n    //       {\r\n    //         value: '测试2',\r\n    //         label: '2'\r\n    //       },\r\n    //       {\r\n    //         value: '测试3',\r\n    //         label: '3'\r\n    //       },\r\n    //     ]\r\n    //   }\r\n    // },\r\n    // {\r\n    //   prop: 'checkbox',\r\n    //   label: '多选',\r\n    //   type: {\r\n    //     name: 'checkbox',\r\n    //     checkbox: [\r\n    //       {\r\n    //         value: '测试',\r\n    //         label: '1'\r\n    //       },\r\n    //       {\r\n    //         value: '测试2',\r\n    //         label: '2'\r\n    //       },\r\n    //       {\r\n    //         value: '测试3',\r\n    //         label: '3'\r\n    //       },\r\n    //     ]\r\n    //   }\r\n    // },\r\n    {\r\n      prop: 'select',\r\n      label: '选择器',\r\n      type: {\r\n        name: 'select',\r\n        select: [\r\n          {\r\n            value: '测试',\r\n            label: '1'\r\n          },\r\n          {\r\n            value: '测试2',\r\n            label: '2'\r\n          },\r\n          {\r\n            value: '测试3',\r\n            label: '3'\r\n          },\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      prop: 'switch',\r\n      label: '开关',\r\n      type: {\r\n        name: 'switch'\r\n      }\r\n    },\r\n    {\r\n      prop: 'time',\r\n      label: '时间',\r\n      type: {\r\n        name: 'time-select',\r\n        start: '00:00',\r\n        end: '12:00',\r\n        step: '00:10'\r\n      }\r\n    },\r\n    {\r\n      prop: 'date',\r\n      label: '日期',\r\n      type: {\r\n        name: 'date',\r\n      }\r\n    },\r\n  ],\r\n  data: {\r\n    video: 'src/assets/test.mp4',\r\n    // image: ['https://img0.baidu.com/it/u=256816879,771155532&fm=253&fmt=auto&app=120&f=JPEG?w=1204&h=800', 'https://img0.baidu.com/it/u=3628503530,464378779&fm=253&fmt=auto&app=120&f=JPEG?w=1200&h=800']\r\n  },\r\n  label: {\r\n      width: '200px'\r\n  },\r\n})\r\n</script>\r\n\r\n<style>\r\n.demo-form-inline .el-input {\r\n  --el-input-width: 220px;\r\n}\r\n\r\n.demo-form-inline .el-select {\r\n  --el-select-width: 220px;\r\n}\r\n</style>\r\n"],"names":["useAttrs","formRef","ref","__expose","basicFormRef","save","computed","options","data","value","validate","valid","reactive","props","events","rules","formList","prop","label","type","name","select","start","end","step","video","width"],"mappings":"wgCA4DcA,IAAd,MAQMC,EAAUC,WACHC,EAAA,CACXF,g9GC1DF,MAAMG,EAAeF,IAEfG,GADOC,GAAS,IAAMC,EAAQC,OACvB,KAEXJ,EAAaK,MAAMR,QAAQS,UAAUC,IAKnC,GACD,GAEGJ,EAAUK,EAAS,CAEvBC,MAAO,CAEP,EAEAC,OAAQ,CAAC,EAETC,MAAO,CAKP,EACAC,SAAU,CA8ER,CACEC,KAAM,SACNC,MAAO,MACPC,KAAM,CACJC,KAAM,SACNC,OAAQ,CACN,CACEZ,MAAO,KACPS,MAAO,KAET,CACET,MAAO,MACPS,MAAO,KAET,CACET,MAAO,MACPS,MAAO,QAKf,CACED,KAAM,SACNC,MAAO,KACPC,KAAM,CACJC,KAAM,WAGV,CACEH,KAAM,OACNC,MAAO,KACPC,KAAM,CACJC,KAAM,cACNE,MAAO,QACPC,IAAK,QACLC,KAAM,UAGV,CACEP,KAAM,OACNC,MAAO,KACPC,KAAM,CACJC,KAAM,UAIZZ,KAAM,CACJiB,MAAO,uBAGTP,MAAO,CACHQ,MAAO"}