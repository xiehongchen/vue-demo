import{i as e,q as t,v as a,o,s as n,w as s,a as r,$ as i,a0 as l,b as p,t as c,x as u,l as d,a1 as g,p as f,W as b,c as m,k,F as x,H as _,B as v,C as y,_ as C,X as j,Z as z,U as w,Y as h,a2 as S,a3 as O,j as $}from"./vendor-bZbVrpZz.js";import{u as R,g as B}from"./useTable-CMAMVJr0.js";import{_ as T}from"./index-Cjx8dkaM.js";import"./index-BI_Yi6El.js";const U=e=>"function"==typeof e,q=e=>"string"==typeof e,P=e=>null!==e&&"object"==typeof e,A=e({__name:"ActionButton",props:{button:{},scope:{}},emits:["click"],setup(e,{emit:f}){const b=e,m=t((()=>{let e=b.button.props||{};return Object.assign({marginRight:"10px",type:"primary",size:"small"},U(e)?e(b.scope.row):e)})),k=t((()=>{const e=b.button.confirm;if(void 0===e)return!1;if(!q(e)&&!P(e)&&!U(e))return{};if(q(e))return{title:e};if(U(e)){const t=e(b.scope.row);if(P(t))return t;if(q(t))return{title:t}}return P(e)&&void 0!==e.title?U(e.title)?{...e,title:e.title(b.scope.row)}:e:void 0})),x=f,_=(e,t)=>{U(e.click)&&x("click")},v=(e,a)=>{var o;return U(e.text)?null==(o=t((()=>e.text(a))).value)?void 0:o.replace(/\"/g,""):e.text};return(e,t)=>{const f=d,x=g;return a(k)?(o(),n(x,u({key:0},a(k),{onConfirm:t[0]||(t[0]=t=>_(e.button,b.scope))}),{reference:s((()=>[r(f,i(l(a(m))),{default:s((()=>[p(c(v(e.button,b.scope.row)),1)])),_:1},16)])),_:1},16)):(o(),n(f,u({key:1},a(m),{onClick:t[1]||(t[1]=t=>_(e.button,b.scope))}),{default:s((()=>[p(c(v(e.button,b.scope.row)),1)])),_:1},16))}}}),D=e({__name:"index",props:{options:{type:Object,required:!0},loading:{type:Boolean,default:!1}},setup(e,{expose:t}){const l=f();return t({tableRef:l}),(t,g)=>{const f=A,w=C,h=d,S=j,O=z;return b((o(),n(S,u({ref_key:"tableRef",ref:l,data:e.options.data},y(Object.assign({},t.$attrs.events)),Object.assign({},t.$attrs.props)),{default:s((()=>[(o(!0),m(x,null,k(e.options.columns,(e=>(o(),m(x,null,["action"===e.prop?(o(),n(w,i(u({key:0},e)),_({_:2},[k(e.actions,(e=>({name:"default",fn:s((t=>[r(f,{button:e,scope:t,onClick:()=>e.click(t,a(l))},null,8,["button","scope","onClick"])]))})))]),1040)):a(U)(e.click)?(o(),n(w,i(u({key:1},e)),{default:s((({row:t,col:o,index:n})=>[r(h,u(Object.assign({},e.props||{}),{onClick:a=>e.click(t,o,n)}),{default:s((()=>[p(c(a(U)(e.text)?e.text(t,o,n):e.text),1)])),_:2},1040,["onClick"])])),_:2},1040)):e.slot?(o(),n(w,i(u({key:2},e)),{default:s((({row:a,col:o,$index:n})=>[v(t.$slots,e.slot,{row:a,col:o,index:n,key:n})])),_:2},1040)):(o(),n(w,i(u({key:3},e)),null,16))],64)))),256))])),_:3},16,["data"])),[[O,e.loading]])}}}),E=(e=>(S("data-v-ed8148b5"),e=e(),O(),e))((()=>$("h1",null,"表格二次封装",-1))),F=T(e({__name:"table2",setup(e){const t=w({name:"",status:""}),{loading:n,tableData:s,pagination:i,changeCurrent:l,changePageSize:p}=R((e=>B({...t,current:e.page,pageSize:e.size})),{immediate:!0,formatResult:e=>e.map((e=>({...e,isEdit:!1})))}),c=w({props:{border:!0,stripe:!0},events:{},data:s,columns:[{prop:"name",label:"姓名",text:"查看姓名",click:e=>{}},{prop:"startTime",label:"开始时间",formatter:e=>e.startTime.slice(0,4)},{prop:"date",label:"日期"},{prop:"address",label:"地址"},{label:"操作",prop:"action",actions:[{text:"编辑"},{text:"删除"},{text:"查看",click:({row:e},t)=>{}}]}]});return(e,t)=>{const s=D,u=h;return o(),m("div",null,[E,r(s,{options:c,loading:a(n),props:c.props,events:c.events},null,8,["options","loading","props","events"]),r(u,{background:"",layout:"prev, pager, next",total:a(i).total,"page-size":a(i).pageSize,"onUpdate:pageSize":t[0]||(t[0]=e=>a(i).pageSize=e),"current-page":a(i).current,"onUpdate:currentPage":t[1]||(t[1]=e=>a(i).current=e),onCurrentChange:a(l),onSizeChange:a(p)},null,8,["total","page-size","current-page","onCurrentChange","onSizeChange"])])}}}),[["__scopeId","data-v-ed8148b5"]]);export{F as default};
//# sourceMappingURL=table2-CIKV_Mhi.js.map
