{"version":3,"file":"index-D-_BTfuC.js","sources":["../../src/views/article/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex box\">\r\n    <div class=\"info flex-column flex-row-center flex-col-center\">\r\n      <div class=\"flex flex-col-center\">\r\n        <CalendarFilled style=\"font-size: 15px\" />\r\n        <!-- 创建时间 -->\r\n        <div class=\"m-5\">{{ info.date }}</div>\r\n        <EditFilled style=\"font-size: 15px\" />\r\n        <!-- 更新时间 -->\r\n        <div class=\"m-5\">{{ info.updateDate }}</div>\r\n      </div>\r\n      <div class=\"flex flex-col-center\">\r\n        <TagFilled style=\"font-size: 15px\" />\r\n        <!-- 标签 -->\r\n        <div class=\"m-5\" v-for=\"tag in info.tags\" :key=\"tag\">{{ tag }}</div>\r\n        <AppstoreFilled style=\"font-size: 15px\" />\r\n        <!-- 分类 -->\r\n        <div class=\"m-5\" v-for=\"cate in info.category\" :key=\"cate\">\r\n          {{ cate }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <MdPreview class=\"preview\" :modelValue=\"state.text\" :editorId=\"state.id\" />\r\n  <MdCatalog\r\n    class=\"catelog\"\r\n    :editorId=\"state.id\"\r\n    :scrollElement=\"scrollElement\"\r\n    :theme=\"state.theme\"\r\n  />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport {\r\n  CalendarFilled,\r\n  TagFilled,\r\n  AppstoreFilled,\r\n  EditFilled,\r\n} from \"@ant-design/icons-vue\";\r\nimport { MdPreview, MdCatalog } from \"md-editor-v3\";\r\nimport \"md-editor-v3/lib/preview.css\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useArticle } from \"@/store/article\";\r\nconst article = useArticle();\r\nconsole.log(\"article\", article.info);\r\nconst info: any = article.info;\r\nconst route = useRoute();\r\nconst currentName: ComputedRef = computed(() => {\r\n  return route.params.name;\r\n});\r\n\r\nexport type Themes = \"light\" | \"dark\";\r\nconst state = reactive({\r\n  theme: \"dark\" as Themes,\r\n  text: \"\",\r\n  id: \"editor\",\r\n});\r\nwatchEffect(() => {\r\n  if (route.path.startsWith(\"/doc/\")) {\r\n    // import(/* @vite-ignore */ \"/markdown/\" + currentName.value + \".md?raw\")\r\n    //   .then((e) => {\r\n    //     console.log('e', e)\r\n    //     state.text = e.default;\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     console.log('error', error)\r\n    //   });\r\n    // 前缀\r\n    // const mrk = new Request(prefix + currentName.value + \".md\");\r\n    // fetch(mrk)\r\n    //   .then((response) => {\r\n    //     console.log('response', response)\r\n    //     return response.text();\r\n    //   })\r\n    //   .then((text) => {\r\n    //     console.log('text', text)\r\n    //     state.text = text.replace(/---[\\s\\S]*?---/, '')\r\n    //   });\r\n\r\n    // 创建一个 XMLHttpRequest 对象\r\n    let prefix = \"/markdown/\";\r\n    if (process.env.NODE_ENV === \"production\") {\r\n      prefix = \"/vue-demo\" + prefix;\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    // 定义要读取的 Markdown 文件的路径\r\n    var markdownFilePath = prefix + currentName.value + \".md\"; // 更改为您要读取的文件名\r\n    // 发送 GET 请求以获取 Markdown 文件内容\r\n    xhr.open(\"GET\", markdownFilePath, true);\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.DONE) {\r\n        if (xhr.status === 200) {\r\n          // 当请求成功完成时，您可以在此处处理返回的 Markdown 内容\r\n          state.text = xhr.responseText;\r\n          console.log(\"markdownContent\", xhr);\r\n        } else {\r\n          // 如果请求失败，您可以在此处处理错误\r\n          console.error(\"Failed to load Markdown file.\");\r\n        }\r\n      }\r\n    };\r\n    // 发送请求\r\n    xhr.send();\r\n  }\r\n});\r\n\r\nconst scrollElement = document.documentElement;\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  width: calc(100% - 200px);\r\n  box-sizing: border-box;\r\n  padding: 10px 20px;\r\n  .info {\r\n    margin: 0 auto;\r\n    color: #fff;\r\n    font-size: 20px;\r\n    width: 80%;\r\n    padding: 10px 20px;\r\n    .m-5 {\r\n      margin: 5px 20px 5px 10px;\r\n    }\r\n  }\r\n}\r\n\r\n:deep(.md-editor-preview-wrapper) {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: calc(100% - 200px);\r\n\r\n  .md-editor-preview {\r\n    background-color: #fff;\r\n    width: 70%;\r\n    padding: 20px;\r\n    box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.24),\r\n      0 17px 50px 0 rgba(0, 0, 0, 0.19);\r\n  }\r\n}\r\n.preview {\r\n  background: transparent;\r\n}\r\n\r\n.catelog {\r\n  position: fixed;\r\n  background-color: #fff;\r\n  right: 0;\r\n  top: 200px;\r\n  width: 200px;\r\n  padding: 20px;\r\n  height: 80%;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"],"names":["article","useArticle","console","log","info","route","useRoute","currentName","computed","params","name","state","reactive","theme","text","id","watchEffect","path","startsWith","prefix","xhr","XMLHttpRequest","markdownFilePath","value","open","onreadystatechange","readyState","DONE","status","responseText","error","send","scrollElement","document","documentElement"],"mappings":"wcA2CA,MAAMA,EAAUC,IACRC,QAAAC,IAAI,UAAWH,EAAQI,MAC/B,MAAMA,EAAYJ,EAAQI,KACpBC,EAAQC,IACRC,EAA2BC,GAAS,IACjCH,EAAMI,OAAOC,OAIhBC,EAAQC,EAAS,CACrBC,MAAO,OACPC,KAAM,GACNC,GAAI,WAENC,GAAY,KACV,GAAIX,EAAMY,KAAKC,WAAW,SAAU,CAsBlC,IAAIC,EAAS,aAEXA,EAAS,YAAcA,EAErB,IAAAC,EAAM,IAAIC,eAEVC,EAAmBH,EAASZ,EAAYgB,MAAQ,MAEhDH,EAAAI,KAAK,MAAOF,GAAkB,GAClCF,EAAIK,mBAAqB,WACnBL,EAAIM,aAAeL,eAAeM,OACjB,MAAfP,EAAIQ,QAENjB,EAAMG,KAAOM,EAAIS,aACT3B,QAAAC,IAAI,kBAAmBiB,IAG/BlB,QAAQ4B,MAAM,iCAElB,EAGFV,EAAIW,MACN,KAGF,MAAMC,EAAgBC,SAASC"}