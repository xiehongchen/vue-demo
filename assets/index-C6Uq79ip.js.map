{"version":3,"file":"index-C6Uq79ip.js","sources":["../../src/views/article/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex box\">\r\n    <div class=\"info flex-column flex-row-center flex-col-center\">\r\n      <div class=\"flex flex-col-center\">\r\n        {{ info.summary }}\r\n      </div>\r\n      <div class=\"flex flex-col-center\">\r\n        <CalendarFilled style=\"font-size: 15px\" />\r\n        <!-- 创建时间 -->\r\n        <div class=\"m-5\">{{ info.date }}</div>\r\n        <EditFilled style=\"font-size: 15px\" />\r\n        <!-- 更新时间 -->\r\n        <div class=\"m-5\">{{ info.updateDate }}</div>\r\n      </div>\r\n      <div class=\"flex flex-col-center\">\r\n        <TagFilled style=\"font-size: 15px\" />\r\n        <!-- 标签 -->\r\n        <div class=\"m-5\" v-for=\"tag in info.tags\" :key=\"tag\">{{ tag }}</div>\r\n        <AppstoreFilled style=\"font-size: 15px\" />\r\n        <!-- 分类 -->\r\n        <div class=\"m-5\" v-for=\"cate in info.category\" :key=\"cate\">\r\n          {{ cate }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <MdPreview class=\"preview\" :modelValue=\"state.text\" :editorId=\"state.id\" />\r\n  <MdCatalog\r\n    class=\"catelog\"\r\n    :class=\"layout == 'left' ? 'left' : 'right'\"\r\n    :editorId=\"state.id\"\r\n    :scrollElement=\"scrollElement\"\r\n    :theme=\"state.theme\"\r\n  />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport {\r\n  CalendarFilled,\r\n  TagFilled,\r\n  AppstoreFilled,\r\n  EditFilled,\r\n} from \"@ant-design/icons-vue\";\r\nimport { MdPreview, MdCatalog } from \"md-editor-v3\";\r\nimport \"md-editor-v3/lib/preview.css\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useArticle } from \"@/store/article\";\r\nimport { useSetting } from '@/store/setting'\r\nconst article = useArticle();\r\nconst setting = useSetting()\r\nconsole.log(\"article\", article.info);\r\nconst info: any = article.info;\r\nconst layout = computed(() =>  setting.articleLayout)\r\nconst route = useRoute();\r\nconst currentName: ComputedRef = computed(() => {\r\n  return route.params.name;\r\n});\r\n\r\nexport type Themes = \"light\" | \"dark\";\r\nconst state = reactive({\r\n  theme: \"dark\" as Themes,\r\n  text: \"\",\r\n  id: \"editor\",\r\n});\r\nwatchEffect(() => {\r\n  if (route.path.startsWith(\"/doc/\")) {\r\n    let prefix = \"/data/\";\r\n    if (process.env.NODE_ENV === \"production\") {\r\n      prefix = \"/vue-demo\" + prefix;\r\n    }\r\n    const mrk = new Request(prefix + currentName.value + \".js\");\r\n    fetch(mrk)\r\n      .then((response) => {\r\n        console.log('response', response)\r\n        return response.text();\r\n      })\r\n      .then((text) => {\r\n        console.log('text', text)\r\n        state.text = text.replace(/---[\\s\\S]*?---/, '')\r\n      });\r\n  }\r\n});\r\n\r\nconst scrollElement = document.documentElement;\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  width: calc(100% - 200px);\r\n  box-sizing: border-box;\r\n  padding: 10px 20px;\r\n  .info {\r\n    margin: 0 auto;\r\n    color: #fff;\r\n    font-size: 20px;\r\n    width: 80%;\r\n    padding: 10px 20px;\r\n    .m-5 {\r\n      margin: 5px 20px 5px 10px;\r\n    }\r\n  }\r\n}\r\n\r\n:deep(.md-editor-preview-wrapper) {\r\n  display: flex;\r\n  justify-content: center;\r\n  // width: calc(100% - 200px);\r\n\r\n  .md-editor-preview {\r\n    background-color: #fff;\r\n    width: 70%;\r\n    padding: 20px;\r\n    box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.24),\r\n      0 17px 50px 0 rgba(0, 0, 0, 0.19);\r\n  }\r\n}\r\n.preview {\r\n  background: transparent;\r\n}\r\n\r\n.catelog {\r\n  position: fixed;\r\n  background-color: #fff;\r\n  top: 100px;\r\n  width: 200px;\r\n  padding: 20px;\r\n  height: 80%;\r\n  overflow: auto;\r\n}\r\n.left {\r\n  left: 0;\r\n}\r\n.right {\r\n  right: 0;\r\n}\r\n</style>\r\n"],"names":["article","useArticle","setting","useSetting","info","layout","computed","articleLayout","route","useRoute","currentName","params","name","state","reactive","theme","text","id","watchEffect","path","startsWith","prefix","mrk","Request","value","fetch","then","response","replace","scrollElement","document","documentElement"],"mappings":"qhBAgDA,MAAMA,EAAUC,IACVC,EAAUC,IAEVC,EAAYJ,EAAQI,KACpBC,EAASC,GAAS,IAAOJ,EAAQK,gBACjCC,EAAQC,IACRC,EAA2BJ,GAAS,IACjCE,EAAMG,OAAOC,OAIhBC,EAAQC,EAAS,CACrBC,MAAO,OACPC,KAAM,GACNC,GAAI,WAENC,GAAY,KACV,GAAIV,EAAMW,KAAKC,WAAW,SAAU,CAClC,IAAIC,EAAS,SAEXA,EAAS,YAAcA,EAEzB,MAAMC,EAAM,IAAIC,QAAQF,EAASX,EAAYc,MAAQ,OACrDC,MAAMH,GACHI,MAAMC,GAEEA,EAASX,SAEjBU,MAAMV,IAELH,EAAMG,KAAOA,EAAKY,QAAQ,iBAAkB,GAAE,GAEpD,KAGF,MAAMC,EAAgBC,SAASC"}